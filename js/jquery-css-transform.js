(function($){var translateUnits='px';var rotateUnits='deg';var cssProxied=$.fn.css;$.fn.css=function(arg){if(typeof $.props['perspective']=='undefined'&&(arg=='perspective'||(typeof arg=='object'&&typeof arg['perspective']!='undefined'))){var _this=this;$.props['perspective']=(function(){var properties=['perspective','WebkitPerspective','MozPerspective'];var p;while(p=properties.shift()){if(typeof _this.get(0).style[p]!='undefined'){return p}}return'perspective'})()}if(typeof $.props['transform']=='undefined'&&(arg=='transform'||(typeof arg=='object'&&typeof arg['transform']!='undefined'))){var _this=this;$.props['transform']=(function(){var properties=['transform','WebkitTransform','MozTransform'];var p;while(p=properties.shift()){if(typeof _this.get(0).style[p]!='undefined'){return p}}return'transform'})()}switch(arg){case"perspective":arg=$.props['perspective'];break;case"transform":arg=$.props['transform'];break}return cssProxied.apply(this,arguments)};var applyRotate=function(prop,val){var style=$(this).css('transform')||'none';if(typeof val=='undefined'){if(style){var m=style.match(new RegExp(prop+'\\(([^)]+)\\)'));if(m&&m[1]){return m[1]}}return 0}var units=rotateUnits;var m=val.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/);if(m){if(m[3]){units=m[3]}$(this).css('transform',style.replace(new RegExp('none|'+prop+'\\([^)]*\\)'),'')+prop+'('+m[1]+units+')')}}$.fn.rotate=function(val){return applyRotate.apply(this,["rotate",val])}$.fn.rotateX=function(val){return applyRotate.apply(this,["rotateX",val])}$.fn.rotateY=function(val){return applyRotate.apply(this,["rotateY",val])}$.fn.scale=function(val,duration,options){var style=$(this).css('transform');if(typeof val=='undefined'){if(style){var m=style.match(/scale\(([^)]+)\)/);if(m&&m[1]){return m[1]}}return 1}$(this).css('transform',style.replace(/none|scale\([^)]*\)/,'')+'scale('+val+')')}$.fn.perspective=function(val){var style=$(this).css('perspective')||'none';if(typeof val=='undefined'){if(style)return style;return 0}return $(this).css('perspective',val)}$.fn.translate3d=function(x,y,z){var style=$(this).css('transform')||'none';if(typeof x=='undefined'){if(style){var m=style.match(/translate3d\(([^)]+)\)/);if(m&&m[1]){return m[1]}}return"0deg, 0deg, 0deg"}return $(this).css('transform',style.replace(/none|translate3d\([^)]*\)/,'')+'translate3d('+x+','+y+','+z+')')}var curProxied=$.fx.prototype.cur;$.fx.prototype.cur=function(){switch(this.prop){case'rotate':return parseFloat($(this.elem).rotate());break;case'scale':return parseFloat($(this.elem).scale());break;case'rotateX':return parseFloat($(this.elem).rotateX());break;case'rotateY':return parseFloat($(this.elem).rotateY());break;case'translate3d':return parseFloat($(this.elem).translate3d());break;case'perspective':return parseFloat($(this.elem).perspective());break}return curProxied.apply(this,arguments)}$.fx.step.rotate=function(fx){$(fx.elem).rotate(fx.now+rotateUnits)}$.fx.step.rotateY=function(fx){$(fx.elem).rotateY(fx.now+rotateUnits)}$.fx.step.rotateX=function(fx){$(fx.elem).rotateX(fx.now+rotateUnits)}$.fx.step.scale=function(fx){$(fx.elem).scale(fx.now)}$.fx.step.perspective=function(fx){$(fx.elem).perspective(fx.now)}$.fx.step.translateX=function(fx){var m=$(fx.elem).translate3d().match(/(-?\d+(\.\d+)?)/g);$(fx.elem).translate3d(fx.now+translateUnits,m[1]+translateUnits,m[2]+translateUnits)}$.fx.step.translateY=function(fx){var m=$(fx.elem).translate3d().match(/(-?\d+(\.\d+)?)/g);$(fx.elem).translate3d(m[0]+translateUnits,fx.now+translateUnits,m[2]+translateUnits)}$.fx.step.translateZ=function(fx){var m=$(fx.elem).translate3d().match(/(-?\d+(\.\d+)?)/g);$(fx.elem).translate3d(m[0]+translateUnits,m[1]+translateUnits,fx.now+translateUnits)}var animateProxied=$.fn.animate;$.fn.animate=function(props){var propNames=[];if(typeof props['rotate']!='undefined')propNames.push('rotate');if(typeof props['rotateX']!='undefined')propNames.push('rotateX');if(typeof props['rotateY']!='undefined')propNames.push('rotateY');if(typeof props['perspective']!='undefined')propNames.push('perspective');if(typeof props['translate3d']!='undefined')propNames.push('translate3d');for(var i=0;i<propNames.length;i++){switch(propNames[i]){case'rotate':case'rotateX':case'rotateY':var m=props[propNames[i]].toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);if(m&&m[5]){rotateUnits=m[5]}props[propNames[i]]=m[1];break;case'perspective':var m=props[propNames[i]].toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);props[propNames[i]]=m[1];break;case'translate3d':var m=props[propNames[i]].toString().match(/(-?\d+(\.\d+)?)/g);props["translateX"]=m[0];props["translateY"]=m[1];props["translateZ"]=m[2];break}}return animateProxied.apply(this,arguments)}})(jQuery);